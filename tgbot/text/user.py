import os
import requests

from database.database import get_user_wallet, get_amount_price


def get_price(symbol):
    res = requests.get(f'https://api.binance.com/api/v1/ticker/24hr?symbol=BTC{symbol}')

    if res.status_code == 200:
        price = float(res.json()['lastPrice'])
        return price


def get_price_rub(price):
    res = requests.get(f'https://blockchain.info/tobtc?currency=RUB&value={price}')
    if res.status_code == 200:
        return res.text


def to_fixed(numObj, digits=0):
    return f"{numObj:.{digits}}"


name_service = os.environ.get("BOT_NICKNAME")
telegram_support = os.environ.get("TELEGRAM_SUPPORT")
review_chat = os.environ.get("REVIEW_CHAT")
news_channel = os.environ.get("NEWS_CHANNEL")
monopoly_bot = os.environ.get('USERNAME_BOT')

start_text = f"""
‚úåÔ∏è –ë–æ—Ç –æ–±–º–µ–Ω–Ω–∏–∫! <a href="https://i.vgy.me/52boQl.png">  </a>

–¢—É—Ç —Ç—ã –º–æ–∂–µ—à—å –æ–±–º–µ–Ω—è—Ç—å —Å–≤–æ–∏ RUB –Ω–∞ BTC

–ï—Å–ª–∏ —Ç—ã "–Ω–æ–≤–∏—á–æ–∫" –∏ —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ —Å–∫–∏–¥–∫—É? - –ø–∏—à–∏ –º–Ω–µ @{telegram_support}

–ñ–º–∏ –∫–Ω–æ–ø–∫—É "üëâ –ö—É–ø–∏—Ç—å –ë–∏—Ç–∫–æ–∏–Ω üëà" –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏ —Å—É–º–º—É –≤ RUB –∏–ª–∏ BTC

–ü—Ä–∏–º–µ—Ä: 0.001 –∏–ª–∏ 0,001
"""

buy_bitcoin = """
–£–∫–∞–∂–∏—Ç–µ —Å—É–º–º—É –≤ BTC:

```
–ü—Ä–∏–º–µ—Ä: 0.001 –∏–ª–∏ 0,001 –∏–ª–∏ 5000
```
"""


async def choose_method_pay(id):
    choose_amount = await get_amount_price(id, 'amount_btc')
    if ',' in choose_amount:
        choose_amount = choose_amount.replace(',', '.')
    btc_usd = get_price('USDT')
    if ',' in choose_amount or '.' in choose_amount:
        # –ü–æ–ª—É—á–∞–µ–º –∫—É—Ä—Å BTC/USD
        return f"""
–°—Ä–µ–¥–Ω–∏–π —Ä—ã–Ω–æ—á–Ω—ã–π –∫—É—Ä—Å BTC ${round(btc_usd, 2)}
    
–í—ã –ø–æ–ª—É—á–∏—Ç–µ: *{float(choose_amount):.5f} BTC*
    
–í–∞—à –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞: *0 —Ä—É–±.*
    
–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –≤—ã–±–µ—Ä–∏—Ç–µ *–°–ø–æ—Å–æ–± 
–æ–ø–ª–∞—Ç—ã*:
    
"–ï—Å–ª–∏ —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã –Ω–µ –≤–∏–¥–∏—à—å, - –º–æ–Ω–∏—Ç–æ—Ä—å, –æ–Ω–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è! –ü–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–≤–ª–µ–∫–∞—Ç—å –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É."
    """
    else:
        choose_amount = get_price_rub(choose_amount)
        return f"""
–°—Ä–µ–¥–Ω–∏–π —Ä—ã–Ω–æ—á–Ω—ã–π –∫—É—Ä—Å BTC ${round(btc_usd, 2)}

–í—ã –ø–æ–ª—É—á–∏—Ç–µ: *{float(choose_amount):.5f} BTC*

–í–∞—à –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞: *0 —Ä—É–±.*

–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –≤—ã–±–µ—Ä–∏—Ç–µ *–°–ø–æ—Å–æ–± 
–æ–ø–ª–∞—Ç—ã*:

"–ï—Å–ª–∏ —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã –Ω–µ –≤–∏–¥–∏—à—å, - –º–æ–Ω–∏—Ç–æ—Ä—å, –æ–Ω–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è! –ü–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–≤–ª–µ–∫–∞—Ç—å –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É."
        """


choose_wallet = """
*–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É —Å–≤–æ–π –∫–æ—à–µ–ª–µ–∫ BTC*. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç –µ–≥–æ –∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–º–µ–Ω–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –≤ –≤–∏–¥–µ *—É–¥–æ–±–Ω–æ–π –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ:*
"""

feedback_text = f"""
<b>–ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏:</b>

@{telegram_support}

<b>–ù–∞—à –∫–∞–Ω–∞–ª —Å –æ—Ç–∑—ã–≤–∞–º–∏:</b>

@{review_chat}

<b>–ù–æ–≤–æ—Å—Ç–∏ –Ω–∞—à–µ–≥–æ –æ–±–º–µ–Ω–Ω–∏–∫–∞, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã, –∞–∫—Ü–∏–∏ –∏ –∫–æ–Ω–∫—É—Ä—Å—ã –≤ –Ω–∞—à–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º –∫–∞–Ω–∞–ª–µ:</b>

@{news_channel}
"""

promocode_text = f"""
–í—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è.

–ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –ø—Ä–æ–º–æ–∫–æ–¥, —á—Ç–æ–±—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ!

–°–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥—ã –Ω–∞ *–æ–¥–Ω–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ* –ó–ê–ü–†–ï–©–ï–ù–û!

–ï—Å–ª–∏ —Ç—ã "–Ω–æ–≤–∏—á–æ–∫" –∏ —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ —Å–∫–∏–¥–∫—É? - –ø–∏—à–∏ –º–Ω–µ @{telegram_support}
"""

help_text = f"""
<b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º:</b>

https://teletype.in/@btcmonopoly/rkonw2aZU

<b>–í–∏–¥–µ–æ–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</b>

https://www.youtube.com/watch?v=s4dkqKoxgG8

<b>–ù–µ —Ä–∞–∑–æ–±—Ä–∞–ª—Å—è —Å –±–æ—Ç–æ–º? –ü–∏—à–∏ –º–Ω–µ, –ø—Ä–æ–≤–µ–¥–µ–º –æ–±–º–µ–Ω –≤—Ä—É—á–Ω—É—é:</b>

@{telegram_support}

<b>–ü—Ä–æ–º–æ–∫–æ–¥—ã, –∞–∫—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –≤—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –≤ –Ω–∞—à–µ–º –∫–∞–Ω–∞–ª–µ:</b>

@{news_channel}

<b>–ù–∞—à –∫–∞–Ω–∞–ª —Å –æ—Ç–∑—ã–≤–∞–º–∏:</b>

@{review_chat}
"""

sell_bitcoins = f"""
–ü–æ–∫—É–ø–∞–µ–º –æ—Ç 10000 —Ä—É–±. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞—Ç—å BTC, –ø–∏—à–∏—Ç–µ @{telegram_support}
"""

partner_program = """
*–£—Å–ª–æ–≤–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:*

–†–µ–∫–æ–º–µ–Ω–¥—É–π—Ç–µ –Ω–∞—à —Å–µ—Ä–≤–∏—Å, —Å—Ç—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –æ—Ç –∫–∞–∂–¥–æ–≥–æ –æ–±–º–µ–Ω–∞ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –≤–∞–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤!

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –Ω–∞ –≤—ã–≤–æ–¥: 0.005 BTC

‚ö†Ô∏è–í–Ω–∏–º–∞–Ω–∏–µ! –í—ã–≤–æ–¥ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –≤ Monopoly Casino, –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω. –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∫–∞–∫ —Å–∫–∏–¥–∫—É –¥–ª—è –æ–±–º–µ–Ω–∞ –≤ BTC Monopoly –∏–ª–∏ –∂–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä–∞—Ç—å –≤ Monopoly Casino.

–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É!
"""


def my_partner_link(id):
    return f"""
–í–∞—à–∞ —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤:

https://t.me/{monopoly_bot}?start={id}
    """


def my_finance_text():
    return """
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –≤ –º–æ–µ–π –∫–æ–º–∞–Ω–¥–µ: 0

–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä—ã: 0

–û–ø–ª–∞—á–µ–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤: 0

–ù–∞ –±–∞–ª–∞–Ω—Å–µ: 0 —Ä—É–±.

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –Ω–∞ –≤—ã–≤–æ–¥: 0.005 BTC
"""


async def out_commission(id):
    check_exist = await get_user_wallet(id)
    if check_exist:
        text = f"""
–†–∞–Ω–µ–µ –≤—ã —É–∫–∞–∑–∞–ª–∏ –¥–∞–Ω–Ω—ã–π BTC –∞–¥—Ä–µ—Å {check_exist[1]}

–í–≤–µ–¥–∏—Ç–µ –≤–∞—à BTC –∫–æ—à–µ–ª–µ–∫:
        """
    else:
        text = """
–£ –≤–∞—Å –µ—â–µ –Ω–µ —É–∫–∞–∑–∞–Ω –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –≤—ã–ø–ª–∞—Ç –∫–æ–º–∏—Å—Å–∏–æ–Ω–Ω—ã—Ö.
    
–í–≤–µ–¥–∏—Ç–µ –≤–∞—à BTC –∫–æ—à–µ–ª–µ–∫:
        """
    return text


out_back = """
–ü–æ–∫–∞ —á—Ç–æ —É –í–∞—Å –Ω–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏—Ö –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π.

–í—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤, –µ—Å–ª–∏ —Å—É–º–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π –¥–æ—Å—Ç–∏–≥–ª–∞ –∏–ª–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 0.005 BTC
"""
# ============================================================
referral_link_text = '‚ùó –ù–µ–ª—å–∑—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!'
